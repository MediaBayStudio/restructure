window.Replacement=(Replacement=function(){return function(e){var t=this;for(var i in t.defaults={},t.options=e,t.resizes={},t.defaults)void 0===t.options[i]&&(t.options[i]=t.defaults[i]);t.q=function(e,t){return(t=t||document.body).querySelector(e)},t.matchMedia=function(e){return window.matchMedia(e).matches},t.resizeHandler=t.initGrid.bind(t),t.grid={},t.parentElements=[],t.childElements=[],t.currentMediaQuery=void 0,t.init(),t.initGrid(),window.addEventListener("resize",t.resizeHandler)}}(),Replacement.prototype.init=function(){var f=this,u=f.options,e=u.initial;if("function"==typeof e.delete)for(var t in f.grid.initial=e,u)"("===t[0]&&")"===t[t.length-1]&&(f.grid[t]=u[t]);else{function p(e,t){var i=-1!==t.indexOf("#"),n=-1!==t.indexOf(".");return i?e.id===t.slice(1):n?e.classList.contains(t.slice(1)):e.tagName===t.toUpperCase()}var i=new Map,h=f.parentElements,m=f.childElements;for(var n in e){for(var r=e[n],a=f.q(n),o=[],d=0;d<r.length;d++){var l=r[d];"string"==typeof r[d]&&(o[d]=f.q(r[d],a),l=o[d]),f.childElements[f.childElements.length]=l}0===o.length&&(o=r),i.set(a,o),f.parentElements[f.parentElements.length]=a}for(var s in f.grid.initial=i,u)"("===s[0]&&")"===s[s.length-1]&&function(e){var t=u[e],i=new Map;for(var n in t){for(var r=t[n],a=void 0,o=[],d=0;d<h.length;d++)if(p(h[d],n)){a=h[d];break}for(var l=0;l<r.length;l++)for(var s=r[l],c=0;c<m.length;c++)if(p(m[c],s)){o[l]=m[c];break}i.set(a,o)}f.grid[e]=i}(s)}},Replacement.prototype.initGrid=function(){var e=this.ctx||this,t=(e.options,e.grid);e.elements,e.targetMediaQuery,e.currentMediaQuery;for(var i in e.targetMediaQuery=void 0,t)e.matchMedia(i)&&(e.targetMediaQuery=i);e.targetMediaQuery!==e.currentMediaQuery&&e.placementElements()},Replacement.prototype.placementElements=function(){var e=this,t=(e.options,e.grid),i=e.targetMediaQuery,n=(e.currentMediaQuery,t[i||"initial"]);e.currentMediaQuery=i||void 0,n.forEach(function(e,t){for(;t.firstChild;)t.removeChild(t.firstChild);for(var i=0;i<e.length;i++)t.appendChild(e[i])})},Replacement);