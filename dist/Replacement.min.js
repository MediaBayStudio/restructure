!function(e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():window.Replacement=e()}((function(){return Replacement=function(e){let t=this;t.defaults={"mobile-first":!0},t.options=e,t.resizes={};for(let e in t.defaults)void 0===t.options[e]&&(t.options[e]=t.defaults[e]);t.q=function(e,t){return(t=t||document.body).querySelector(e)},t.matchMedia=function(e){return window.matchMedia(e).matches},t.dispatchEvent=function(e,t){if("function"==typeof window.CustomEvent){let n=new CustomEvent(t);e.dispatchEvent(n)}},t.resizeHandler={handleEvent:t.initGrid,ctx:t},t.mobileFirst=t.options["mobile-first"],t.grid={},t.parentElements=[],t.childElements=[],t.currentMediaQuery=void 0,t.init(),t.initGrid(),window.addEventListener("resize",t.resizeHandler)},Replacement.prototype.init=function(){let e=this,t=e.options,n=t.initial,i=new Map,r=e.parentElements,o=e.childElements,l=function(n){let i=t[n],l=new Map;for(let e in i){let t,n=i[e],a=[];for(let n=0;n<r.length;n++)if(r[n].matches(e)){t=r[n];break}for(let e=0;e<n.length;e++){let t=n[e];for(let n=0;n<o.length;n++)if(o[n].matches(t)){a[e]=o[n];break}}l.set(t,a)}e.grid[n]=l};for(let t in n){let r=n[t],o=e.q(t),l=[];for(let t=0;t<r.length;t++){let n=r[t];"string"==typeof r[t]&&(l[t]=e.q(r[t],o),n=l[t]),e.childElements[e.childElements.length]=n}0===l.length&&(l=r),i.set(o,l),e.parentElements[e.parentElements.length]=o}e.grid.initial=i;for(let e in t)"("===e[0]&&")"===e[e.length-1]&&l(e)},Replacement.prototype.initGrid=function(){let e=this.ctx||this,t=(e.options,e.grid);e.elements,e.targetMediaQuery,e.currentMediaQuery;e.targetMediaQuery=void 0;for(let n in t)e.matchMedia(n)&&(e.targetMediaQuery=n);e.targetMediaQuery!==e.currentMediaQuery&&e.placementElements()},Replacement.prototype.placementElements=function(){let e=this,t=(e.options,e.grid),n=e.targetMediaQuery,i=(e.currentMediaQuery,t[n||"initial"]);e.currentMediaQuery=n||void 0,i.forEach((function(e,t){t.innerHTML="";for(let n=0;n<e.length;n++)t.appendChild(e[n])}))},Replacement}));