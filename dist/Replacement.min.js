window.Replacement=(Replacement=function(){return function(e){var t=this;for(var i in t.defaults={},t.options=e,t.resizes={},t.defaults)void 0===t.options[i]&&(t.options[i]=t.defaults[i]);t.q=function(e,t){return(t=t||document.body).querySelector(e)},t.matchMedia=function(e){return window.matchMedia(e).matches},t.resizeHandler=t.initGrid.bind(t),t.grid={},t.parentElements=[],t.childElements=[],t.currentMediaQuery=void 0,t.init(),t.initGrid(),window.addEventListener("resize",t.resizeHandler)}}(),Replacement.prototype.init=function(){function u(e,t){var i=-1!==t.indexOf("#"),n=-1!==t.indexOf(".");return i?e.id===t.slice(1):n?(e.tagName,e.classList.contains(t.slice(1))):e.tagName===t.toUpperCase()}var f=this,p=f.options,e=p.initial,t=new Map,h=f.parentElements,m=f.childElements;for(var i in e){for(var n=e[i],r=f.q(i),a=[],o=0;o<n.length;o++){var d=n[o];"string"==typeof n[o]&&(a[o]=f.q(n[o],r),d=a[o]),f.childElements[f.childElements.length]=d}0===a.length&&(a=n),t.set(r,a),f.parentElements[f.parentElements.length]=r}for(var l in f.grid.initial=t,p)"("===l[0]&&")"===l[l.length-1]&&function(e){var t=p[e],i=new Map;for(var n in t){for(var r=t[n],a=void 0,o=[],d=0;d<h.length;d++)if(u(h[d],n)){a=h[d];break}for(var l=0;l<r.length;l++)for(var s=r[l],c=0;c<m.length;c++)if(u(m[c],s)){o[l]=m[c];break}i.set(a,o)}f.grid[e]=i}(l)},Replacement.prototype.initGrid=function(){var e=this.ctx||this,t=(e.options,e.grid);e.elements,e.targetMediaQuery,e.currentMediaQuery;for(var i in e.targetMediaQuery=void 0,t)e.matchMedia(i)&&(e.targetMediaQuery=i);e.targetMediaQuery!==e.currentMediaQuery&&e.placementElements()},Replacement.prototype.placementElements=function(){var e=this,t=(e.options,e.grid),i=e.targetMediaQuery,n=(e.currentMediaQuery,t[i||"initial"]);e.currentMediaQuery=i||void 0,n.forEach(function(e,t){for(;t.firstChild;)t.removeChild(t.firstChild);for(var i=0;i<e.length;i++)t.appendChild(e[i])})},Replacement);