!function(e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():window.Replacement=e()}((function(){return Replacement=function(e){let t=this;t.defaults={},t.options=e,t.resizes={};for(let e in t.defaults)void 0===t.options[e]&&(t.options[e]=t.defaults[e]);t.q=function(e,t){return(t=t||document.body).querySelector(e)},t.matchMedia=function(e){return window.matchMedia(e).matches},t.resizeHandler={handleEvent:t.initGrid,ctx:t},t.grid={},t.parentElements=[],t.childElements=[],t.currentMediaQuery=void 0,t.init(),t.initGrid(),window.addEventListener("resize",t.resizeHandler)},Replacement.prototype.init=function(){let e=this,t=e.options,n=t.initial,i=new Map,r=e.parentElements,l=e.childElements,o=function(e,t){let n=-1!==t.indexOf("#"),i=-1!==t.indexOf(".");return n?e.id===t.slice(1):i?(e.tagName,e.classList.contains(t.slice(1))):e.tagName===t.toUpperCase()},a=function(n){let i=t[n],a=new Map;for(let e in i){let t,n=i[e],d=[];for(let n=0;n<r.length;n++)if(o(r[n],e)){t=r[n];break}for(let e=0;e<n.length;e++){let t=n[e];for(let n=0;n<l.length;n++)if(o(l[n],t)){d[e]=l[n];break}}a.set(t,d)}e.grid[n]=a};for(let t in n){let r=n[t],l=e.q(t),o=[];for(let t=0;t<r.length;t++){let n=r[t];"string"==typeof r[t]&&(o[t]=e.q(r[t],l),n=o[t]),e.childElements[e.childElements.length]=n}0===o.length&&(o=r),i.set(l,o),e.parentElements[e.parentElements.length]=l}e.grid.initial=i;for(let e in t)"("===e[0]&&")"===e[e.length-1]&&a(e)},Replacement.prototype.initGrid=function(){let e=this.ctx||this,t=(e.options,e.grid);e.elements,e.targetMediaQuery,e.currentMediaQuery;e.targetMediaQuery=void 0;for(let n in t)e.matchMedia(n)&&(e.targetMediaQuery=n);e.targetMediaQuery!==e.currentMediaQuery&&e.placementElements()},Replacement.prototype.placementElements=function(){let e=this,t=(e.options,e.grid),n=e.targetMediaQuery,i=(e.currentMediaQuery,t[n||"initial"]);e.currentMediaQuery=n||void 0,i.forEach((function(e,t){for(;t.firstChild;)t.removeChild(t.firstChild);for(let n=0;n<e.length;n++)t.appendChild(e[n])}))},Replacement}));